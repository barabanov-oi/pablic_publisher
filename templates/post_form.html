{% extends 'base.html' %}
{% block content %}
<h2>{% if post %}Редактирование{% else %}Новый пост{% endif %}</h2>
<form method="post" class="long-form">
  <label>Канал
    <select name="channel_id" required>
      {% for c in channels %}
        <option value="{{ c.id }}" {% if post and post.channel_id == c.id %}selected{% endif %}>{{ c.title }}</option>
      {% endfor %}
    </select>
  </label>
  <label>Заголовок <input name="title" value="{{ post.title if post else '' }}" required /></label>
  <label>HTML текст <textarea name="body_html" rows="8">{{ post.body_html if post else '' }}</textarea></label>
  <label>Media JSON (массив объектов type/url) <textarea name="media" rows="4">{{ post.media if post else '[]' }}</textarea></label>
  <label>Buttons JSON (массив text/url) <textarea name="buttons" rows="4">{{ post.buttons if post else '[]' }}</textarea></label>
  <label>Options JSON <textarea name="options" rows="4">{{ post.options if post else '{"disable_notification": false, "pin": false, "protect_content": false, "disable_preview": false}' }}</textarea></label>
  <button type="submit">Сохранить как черновик</button>
</form>
{% endblock %}
